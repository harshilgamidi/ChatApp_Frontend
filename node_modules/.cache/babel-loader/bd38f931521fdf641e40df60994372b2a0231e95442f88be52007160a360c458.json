{"ast":null,"code":"import _taggedTemplateLiteral from\"C:/VideoChat/video-group-meeting-master/video-group-meeting-master/client/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";import _toConsumableArray from\"C:/VideoChat/video-group-meeting-master/video-group-meeting-master/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/VideoChat/video-group-meeting-master/video-group-meeting-master/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7;import React,{useEffect,useState,useRef}from'react';import styled from'styled-components';import socket from'../../socket';var Chat=function Chat(_ref){var display=_ref.display,roomId=_ref.roomId;var currentUser=sessionStorage.getItem('user');var _useState=useState([]),_useState2=_slicedToArray(_useState,2),msg=_useState2[0],setMsg=_useState2[1];var messagesEndRef=useRef(null);var inputRef=useRef();useEffect(function(){socket.on('FE-receive-message',function(_ref2){var msg=_ref2.msg,sender=_ref2.sender;setMsg(function(msgs){return[].concat(_toConsumableArray(msgs),[{sender:sender,msg:msg}]);});});},[]);// Scroll to Bottom of Message List\nuseEffect(function(){scrollToBottom();},[msg]);var scrollToBottom=function scrollToBottom(){messagesEndRef.current.scrollIntoView({behavior:'smooth'});};var sendMessage=function sendMessage(e){if(e.key==='Enter'){var _msg=e.target.value;if(_msg){socket.emit('BE-send-message',{roomId:roomId,msg:_msg,sender:currentUser});inputRef.current.value='';}}};return/*#__PURE__*/React.createElement(ChatContainer,{className:display?'':'width0'},/*#__PURE__*/React.createElement(TopHeader,null,\"Group Chat Room\"),/*#__PURE__*/React.createElement(ChatArea,null,/*#__PURE__*/React.createElement(MessageList,null,msg&&msg.map(function(_ref3,idx){var sender=_ref3.sender,msg=_ref3.msg;if(sender!==currentUser){return/*#__PURE__*/React.createElement(Message,{key:idx},/*#__PURE__*/React.createElement(\"strong\",null,sender),/*#__PURE__*/React.createElement(\"p\",null,msg));}else{return/*#__PURE__*/React.createElement(UserMessage,{key:idx},/*#__PURE__*/React.createElement(\"strong\",null,sender),/*#__PURE__*/React.createElement(\"p\",null,msg));}}),/*#__PURE__*/React.createElement(\"div\",{style:{float:'left',clear:'both'},ref:messagesEndRef}))),/*#__PURE__*/React.createElement(BottomInput,{ref:inputRef,onKeyUp:sendMessage,placeholder:\"Enter your message\"}));};var ChatContainer=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 25%;\\n  hieght: 100%;\\n  background-color: white;\\n  transition: all 0.5s ease;\\n  overflow: hidden;\\n\"])));var TopHeader=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  margin-top: 15px;\\n  font-weight: 600;\\n  font-size: 20px;\\n  color: black;\\n\"])));var ChatArea=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 83%;\\n  max-height: 83%;\\n  overflow-x: hidden;\\n  overflow-y: auto;\\n\"])));var MessageList=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  display: flex;\\n  width: 100%;\\n  flex-direction: column;\\n  padding: 15px;\\n  color: #454552;\\n\"])));var Message=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-start;\\n  font-size: 16px;\\n  margin-top: 15px;\\n  margin-left: 15px;\\n  text-align: left;\\n\\n  > strong {\\n    margin-left: 3px;\\n  }\\n\\n  > p {\\n    max-width: 65%;\\n    width: auto;\\n    padding: 9px;\\n    margin-top: 3px;\\n    border: 1px solid rgb(78, 161, 211, 0.3);\\n    border-radius: 15px;\\n    box-shadow: 0px 0px 3px #4ea1d3;\\n    font-size: 14px;\\n  }\\n\"])));var UserMessage=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: flex-end;\\n  width: 100%;\\n  font-size: 16px;\\n  margin-top: 15px;\\n  text-align: right;\\n\\n  > strong {\\n    margin-right: 35px;\\n  }\\n\\n  > p {\\n    max-width: 65%;\\n    width: auto;\\n    padding: 9px;\\n    margin-top: 3px;\\n    margin-right: 30px;\\n    border: 1px solid rgb(78, 161, 211, 0.3);\\n    border-radius: 15px;\\n    background-color: #4ea1d3;\\n    color: white;\\n    font-size: 14px;\\n    text-align: left;\\n  }\\n\"])));var BottomInput=styled.input(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  bottom: 0;\\n  width: 100%;\\n  height: 8%;\\n  padding: 15px;\\n  border-top: 1px solid rgb(69, 69, 82, 0.25);\\n  box-sizing: border-box;\\n  opacity: 0.7;\\n\\n  :focus {\\n    outline: none;\\n  }\\n\"])));export default Chat;","map":{"version":3,"names":["React","useEffect","useState","useRef","styled","socket","Chat","_ref","display","roomId","currentUser","sessionStorage","getItem","_useState","_useState2","_slicedToArray","msg","setMsg","messagesEndRef","inputRef","on","_ref2","sender","msgs","concat","_toConsumableArray","scrollToBottom","current","scrollIntoView","behavior","sendMessage","e","key","target","value","emit","createElement","ChatContainer","className","TopHeader","ChatArea","MessageList","map","_ref3","idx","Message","UserMessage","style","float","clear","ref","BottomInput","onKeyUp","placeholder","div","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","_templateObject4","_templateObject5","_templateObject6","input","_templateObject7"],"sources":["C:/VideoChat/video-group-meeting-master/video-group-meeting-master/client/src/components/Chat/Chat.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport styled from 'styled-components';\nimport socket from '../../socket';\n\nconst Chat = ({ display, roomId }) => {\n  const currentUser = sessionStorage.getItem('user');\n  const [msg, setMsg] = useState([]);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef();\n  \n  useEffect(() => {\n    socket.on('FE-receive-message', ({ msg, sender }) => {\n      setMsg((msgs) => [...msgs, { sender, msg }]);\n    });\n  }, []);\n\n  // Scroll to Bottom of Message List\n  useEffect(() => {scrollToBottom()}, [msg])\n\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({ behavior: 'smooth'});\n  }\n\n  const sendMessage = (e) => {\n    if (e.key === 'Enter') {\n      const msg = e.target.value;\n\n      if (msg) {\n        socket.emit('BE-send-message', { roomId, msg, sender: currentUser });\n        inputRef.current.value = '';\n      }\n    }\n  };\n\n  return (\n    <ChatContainer className={display ? '' : 'width0'}>\n      <TopHeader>Group Chat Room</TopHeader>\n      <ChatArea>\n        <MessageList>\n          {msg &&\n            msg.map(({ sender, msg }, idx) => {\n              if (sender !== currentUser) {\n                return (\n                  <Message key={idx}>\n                    <strong>{sender}</strong>\n                    <p>{msg}</p>\n                  </Message>\n                );\n              } else {\n                return (\n                  <UserMessage key={idx}>\n                    <strong>{sender}</strong>\n                    <p>{msg}</p>\n                  </UserMessage>\n                );\n              }\n            })}\n            <div style={{float:'left', clear: 'both'}} ref={messagesEndRef} />\n        </MessageList>\n      </ChatArea>\n      <BottomInput\n        ref={inputRef}\n        onKeyUp={sendMessage}\n        placeholder=\"Enter your message\"\n      />\n    </ChatContainer>\n  );\n};\n\nconst ChatContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 25%;\n  hieght: 100%;\n  background-color: white;\n  transition: all 0.5s ease;\n  overflow: hidden;\n`;\n\nconst TopHeader = styled.div`\n  width: 100%;\n  margin-top: 15px;\n  font-weight: 600;\n  font-size: 20px;\n  color: black;\n`;\n\nconst ChatArea = styled.div`\n  width: 100%;\n  height: 83%;\n  max-height: 83%;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst MessageList = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  padding: 15px;\n  color: #454552;\n`;\n\nconst Message = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  font-size: 16px;\n  margin-top: 15px;\n  margin-left: 15px;\n  text-align: left;\n\n  > strong {\n    margin-left: 3px;\n  }\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 9px;\n    margin-top: 3px;\n    border: 1px solid rgb(78, 161, 211, 0.3);\n    border-radius: 15px;\n    box-shadow: 0px 0px 3px #4ea1d3;\n    font-size: 14px;\n  }\n`;\n\nconst UserMessage = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  width: 100%;\n  font-size: 16px;\n  margin-top: 15px;\n  text-align: right;\n\n  > strong {\n    margin-right: 35px;\n  }\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 9px;\n    margin-top: 3px;\n    margin-right: 30px;\n    border: 1px solid rgb(78, 161, 211, 0.3);\n    border-radius: 15px;\n    background-color: #4ea1d3;\n    color: white;\n    font-size: 14px;\n    text-align: left;\n  }\n`;\n\nconst BottomInput = styled.input`\n  bottom: 0;\n  width: 100%;\n  height: 8%;\n  padding: 15px;\n  border-top: 1px solid rgb(69, 69, 82, 0.25);\n  box-sizing: border-box;\n  opacity: 0.7;\n\n  :focus {\n    outline: none;\n  }\n`;\n\nexport default Chat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}