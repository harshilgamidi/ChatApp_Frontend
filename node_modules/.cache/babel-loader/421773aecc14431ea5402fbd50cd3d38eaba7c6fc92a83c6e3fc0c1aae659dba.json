{"ast":null,"code":"var _jsxFileName = \"C:\\\\VideoChat\\\\video-group-meeting-master\\\\video-group-meeting-master\\\\client\\\\src\\\\components\\\\Room\\\\Room.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport Peer from 'simple-peer';\nimport styled from 'styled-components';\nimport socket from '../../socket';\nimport VideoCard from '../Video/VideoCard';\nimport BottomBar from '../BottomBar/BottomBar';\nimport Chat from '../Chat/Chat';\nconst Room = props => {\n  _s();\n  const currentUser = sessionStorage.getItem('user');\n  const [peers, setPeers] = useState([]);\n  const [userVideoAudio, setUserVideoAudio] = useState({\n    localUser: {\n      video: true,\n      audio: true\n    }\n  });\n  const [videoDevices, setVideoDevices] = useState([]);\n  const [displayChat, setDisplayChat] = useState(false);\n  const [screenShare, setScreenShare] = useState(false);\n  const [showVideoDevices, setShowVideoDevices] = useState(false);\n  const peersRef = useRef([]);\n  const userVideoRef = useRef();\n  const screenTrackRef = useRef();\n  const userStream = useRef();\n  const roomId = props.match.params.roomId;\n  useEffect(() => {\n    // Get Video Devices\n    navigator.mediaDevices.enumerateDevices().then(devices => {\n      const filtered = devices.filter(device => device.kind === 'videoinput');\n      setVideoDevices(filtered);\n    });\n\n    // Set Back Button Event\n    window.addEventListener('popstate', goToBack);\n\n    // Connect Camera & Mic\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(stream => {\n      userVideoRef.current.srcObject = stream;\n      userStream.current = stream;\n      socket.emit('BE-join-room', {\n        roomId,\n        userName: currentUser\n      });\n      socket.on('FE-user-join', users => {\n        // all users\n        const peers = [];\n        users.forEach(_ref => {\n          let {\n            userId,\n            info\n          } = _ref;\n          let {\n            userName,\n            video,\n            audio\n          } = info;\n          if (userName !== currentUser) {\n            const peer = createPeer(userId, socket.id, stream);\n            peer.userName = userName;\n            peer.peerID = userId;\n            peersRef.current.push({\n              peerID: userId,\n              peer,\n              userName\n            });\n            peers.push(peer);\n            setUserVideoAudio(preList => {\n              return {\n                ...preList,\n                [peer.userName]: {\n                  video,\n                  audio\n                }\n              };\n            });\n          }\n        });\n        setPeers(peers);\n      });\n      socket.on('FE-receive-call', _ref2 => {\n        let {\n          signal,\n          from,\n          info\n        } = _ref2;\n        let {\n          userName,\n          video,\n          audio\n        } = info;\n        const peerIdx = findPeer(from);\n        if (!peerIdx) {\n          const peer = addPeer(signal, from, stream);\n          peer.userName = userName;\n          peersRef.current.push({\n            peerID: from,\n            peer,\n            userName: userName\n          });\n          setPeers(users => {\n            return [...users, peer];\n          });\n          setUserVideoAudio(preList => {\n            return {\n              ...preList,\n              [peer.userName]: {\n                video,\n                audio\n              }\n            };\n          });\n        }\n      });\n      socket.on('FE-call-accepted', _ref3 => {\n        let {\n          signal,\n          answerId\n        } = _ref3;\n        const peerIdx = findPeer(answerId);\n        peerIdx.peer.signal(signal);\n      });\n      socket.on('FE-user-leave', _ref4 => {\n        let {\n          userId,\n          userName\n        } = _ref4;\n        const peerIdx = findPeer(userId);\n        peerIdx.peer.destroy();\n        setPeers(users => {\n          users = users.filter(user => user.peerID !== peerIdx.peer.peerID);\n          return [...users];\n        });\n        peersRef.current = peersRef.current.filter(_ref5 => {\n          let {\n            peerID\n          } = _ref5;\n          return peerID !== userId;\n        });\n      });\n    });\n    socket.on('FE-toggle-camera', _ref6 => {\n      let {\n        userId,\n        switchTarget\n      } = _ref6;\n      const peerIdx = findPeer(userId);\n      setUserVideoAudio(preList => {\n        let video = preList[peerIdx.userName].video;\n        let audio = preList[peerIdx.userName].audio;\n        if (switchTarget === 'video') video = !video;else audio = !audio;\n        return {\n          ...preList,\n          [peerIdx.userName]: {\n            video,\n            audio\n          }\n        };\n      });\n    });\n    return () => {\n      socket.disconnect();\n    };\n    // eslint-disable-next-line\n  }, []);\n  function createPeer(userId, caller, stream) {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream\n    });\n    peer.on('signal', signal => {\n      socket.emit('BE-call-user', {\n        userToCall: userId,\n        from: caller,\n        signal\n      });\n    });\n    peer.on('disconnect', () => {\n      peer.destroy();\n    });\n    return peer;\n  }\n  function addPeer(incomingSignal, callerId, stream) {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream\n    });\n    peer.on('signal', signal => {\n      socket.emit('BE-accept-call', {\n        signal,\n        to: callerId\n      });\n    });\n    peer.on('disconnect', () => {\n      peer.destroy();\n    });\n    peer.signal(incomingSignal);\n    return peer;\n  }\n  function findPeer(id) {\n    return peersRef.current.find(p => p.peerID === id);\n  }\n  function createUserVideo(peer, index, arr) {\n    return /*#__PURE__*/React.createElement(VideoBox, {\n      className: `width-peer${peers.length > 8 ? '' : peers.length}`,\n      onClick: expandScreen,\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }\n    }, writeUserName(peer.userName), /*#__PURE__*/React.createElement(FaIcon, {\n      className: \"fas fa-expand\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(VideoCard, {\n      key: index,\n      peer: peer,\n      number: arr.length,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }\n    }));\n  }\n  function writeUserName(userName, index) {\n    if (userVideoAudio.hasOwnProperty(userName)) {\n      if (!userVideoAudio[userName].video) {\n        return /*#__PURE__*/React.createElement(UserName, {\n          key: userName,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 16\n          }\n        }, userName);\n      }\n    }\n  }\n\n  // Open Chat\n  const clickChat = e => {\n    e.stopPropagation();\n    setDisplayChat(!displayChat);\n  };\n\n  // BackButton\n  const goToBack = e => {\n    e.preventDefault();\n    socket.emit('BE-leave-room', {\n      roomId,\n      leaver: currentUser\n    });\n    sessionStorage.removeItem('user');\n    window.location.href = '/';\n  };\n  const toggleCameraAudio = e => {\n    const target = e.target.getAttribute('data-switch');\n    setUserVideoAudio(preList => {\n      let videoSwitch = preList['localUser'].video;\n      let audioSwitch = preList['localUser'].audio;\n      if (target === 'video') {\n        const userVideoTrack = userVideoRef.current.srcObject.getVideoTracks()[0];\n        videoSwitch = !videoSwitch;\n        userVideoTrack.enabled = videoSwitch;\n      } else {\n        const userAudioTrack = userVideoRef.current.srcObject.getAudioTracks()[0];\n        audioSwitch = !audioSwitch;\n        if (userAudioTrack) {\n          userAudioTrack.enabled = audioSwitch;\n        } else {\n          userStream.current.getAudioTracks()[0].enabled = audioSwitch;\n        }\n      }\n      return {\n        ...preList,\n        localUser: {\n          video: videoSwitch,\n          audio: audioSwitch\n        }\n      };\n    });\n    socket.emit('BE-toggle-camera-audio', {\n      roomId,\n      switchTarget: target\n    });\n  };\n  const clickScreenSharing = () => {\n    if (!screenShare) {\n      navigator.mediaDevices.getDisplayMedia({\n        cursor: true\n      }).then(stream => {\n        const screenTrack = stream.getTracks()[0];\n        peersRef.current.forEach(_ref7 => {\n          let {\n            peer\n          } = _ref7;\n          // replaceTrack (oldTrack, newTrack, oldStream);\n          peer.replaceTrack(peer.streams[0].getTracks().find(track => track.kind === 'video'), screenTrack, userStream.current);\n        });\n\n        // Listen click end\n        screenTrack.onended = () => {\n          peersRef.current.forEach(_ref8 => {\n            let {\n              peer\n            } = _ref8;\n            peer.replaceTrack(screenTrack, peer.streams[0].getTracks().find(track => track.kind === 'video'), userStream.current);\n          });\n          userVideoRef.current.srcObject = userStream.current;\n          setScreenShare(false);\n        };\n        userVideoRef.current.srcObject = stream;\n        screenTrackRef.current = screenTrack;\n        setScreenShare(true);\n      });\n    } else {\n      screenTrackRef.current.onended();\n    }\n  };\n  const expandScreen = e => {\n    const elem = e.target;\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.mozRequestFullScreen) {\n      /* Firefox */\n      elem.mozRequestFullScreen();\n    } else if (elem.webkitRequestFullscreen) {\n      /* Chrome, Safari & Opera */\n      elem.webkitRequestFullscreen();\n    } else if (elem.msRequestFullscreen) {\n      /* IE/Edge */\n      elem.msRequestFullscreen();\n    }\n  };\n  const clickBackground = () => {\n    if (!showVideoDevices) return;\n    setShowVideoDevices(false);\n  };\n  const clickCameraDevice = event => {\n    if (event && event.target && event.target.dataset && event.target.dataset.value) {\n      const deviceId = event.target.dataset.value;\n      const enabledAudio = userVideoRef.current.srcObject.getAudioTracks()[0].enabled;\n      navigator.mediaDevices.getUserMedia({\n        video: {\n          deviceId\n        },\n        audio: enabledAudio\n      }).then(stream => {\n        const newStreamTrack = stream.getTracks().find(track => track.kind === 'video');\n        const oldStreamTrack = userStream.current.getTracks().find(track => track.kind === 'video');\n        userStream.current.removeTrack(oldStreamTrack);\n        userStream.current.addTrack(newStreamTrack);\n        peersRef.current.forEach(_ref9 => {\n          let {\n            peer\n          } = _ref9;\n          // replaceTrack (oldTrack, newTrack, oldStream);\n          peer.replaceTrack(oldStreamTrack, newStreamTrack, userStream.current);\n        });\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(RoomContainer, {\n    onClick: clickBackground,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(VideoAndBarContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(VideoContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(VideoBox, {\n    className: `width-peer${peers.length > 8 ? '' : peers.length}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 11\n    }\n  }, userVideoAudio['localUser'].video ? null : /*#__PURE__*/React.createElement(UserName, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 15\n    }\n  }, currentUser), /*#__PURE__*/React.createElement(FaIcon, {\n    className: \"fas fa-expand\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(MyVideo, {\n    onClick: expandScreen,\n    ref: userVideoRef,\n    muted: true,\n    autoPlay: true,\n    playInline: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 13\n    }\n  })), peers && peers.map((peer, index, arr) => createUserVideo(peer, index, arr))), /*#__PURE__*/React.createElement(BottomBar, {\n    clickScreenSharing: clickScreenSharing,\n    clickChat: clickChat,\n    clickCameraDevice: clickCameraDevice,\n    goToBack: goToBack,\n    toggleCameraAudio: toggleCameraAudio,\n    userVideoAudio: userVideoAudio['localUser'],\n    screenShare: screenShare,\n    videoDevices: videoDevices,\n    showVideoDevices: showVideoDevices,\n    setShowVideoDevices: setShowVideoDevices,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Chat, {\n    display: displayChat,\n    roomId: roomId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 7\n    }\n  }));\n};\n_s(Room, \"RO5By0qs/VG4HKgmwDAsbH8Djs8=\");\n_c = Room;\nconst RoomContainer = styled.div`\n  display: flex;\n  width: 100%;\n  max-height: 100vh;\n  flex-direction: row;\n`;\n_c2 = RoomContainer;\nconst VideoContainer = styled.div`\n  max-width: 100%;\n  height: 92%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  align-items: center;\n  padding: 15px;\n  box-sizing: border-box;\n  gap: 10px;\n`;\n_c3 = VideoContainer;\nconst VideoAndBarContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100vh;\n`;\n_c4 = VideoAndBarContainer;\nconst MyVideo = styled.video``;\n_c5 = MyVideo;\nconst VideoBox = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  > video {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  :hover {\n    > i {\n      display: block;\n    }\n  }\n`;\n_c6 = VideoBox;\nconst UserName = styled.div`\n  position: absolute;\n  font-size: calc(20px + 5vmin);\n  z-index: 1;\n`;\n_c7 = UserName;\nconst FaIcon = styled.i`\n  display: none;\n  position: absolute;\n  right: 15px;\n  top: 15px;\n`;\n_c8 = FaIcon;\nexport default Room;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n$RefreshReg$(_c, \"Room\");\n$RefreshReg$(_c2, \"RoomContainer\");\n$RefreshReg$(_c3, \"VideoContainer\");\n$RefreshReg$(_c4, \"VideoAndBarContainer\");\n$RefreshReg$(_c5, \"MyVideo\");\n$RefreshReg$(_c6, \"VideoBox\");\n$RefreshReg$(_c7, \"UserName\");\n$RefreshReg$(_c8, \"FaIcon\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Peer","styled","socket","VideoCard","BottomBar","Chat","Room","props","_s","currentUser","sessionStorage","getItem","peers","setPeers","userVideoAudio","setUserVideoAudio","localUser","video","audio","videoDevices","setVideoDevices","displayChat","setDisplayChat","screenShare","setScreenShare","showVideoDevices","setShowVideoDevices","peersRef","userVideoRef","screenTrackRef","userStream","roomId","match","params","navigator","mediaDevices","enumerateDevices","then","devices","filtered","filter","device","kind","window","addEventListener","goToBack","getUserMedia","stream","current","srcObject","emit","userName","on","users","forEach","_ref","userId","info","peer","createPeer","id","peerID","push","preList","_ref2","signal","from","peerIdx","findPeer","addPeer","_ref3","answerId","_ref4","destroy","user","_ref5","_ref6","switchTarget","disconnect","caller","initiator","trickle","userToCall","incomingSignal","callerId","to","find","p","createUserVideo","index","arr","createElement","VideoBox","className","length","onClick","expandScreen","key","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","writeUserName","FaIcon","number","hasOwnProperty","UserName","clickChat","e","stopPropagation","preventDefault","leaver","removeItem","location","href","toggleCameraAudio","target","getAttribute","videoSwitch","audioSwitch","userVideoTrack","getVideoTracks","enabled","userAudioTrack","getAudioTracks","clickScreenSharing","getDisplayMedia","cursor","screenTrack","getTracks","_ref7","replaceTrack","streams","track","onended","_ref8","elem","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","clickBackground","clickCameraDevice","event","dataset","value","deviceId","enabledAudio","newStreamTrack","oldStreamTrack","removeTrack","addTrack","_ref9","RoomContainer","VideoAndBarContainer","VideoContainer","MyVideo","ref","muted","autoPlay","playInline","map","display","_c","div","_c2","_c3","_c4","_c5","_c6","_c7","i","_c8","$RefreshReg$"],"sources":["C:/VideoChat/video-group-meeting-master/video-group-meeting-master/client/src/components/Room/Room.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport Peer from 'simple-peer';\nimport styled from 'styled-components';\nimport socket from '../../socket';\nimport VideoCard from '../Video/VideoCard';\nimport BottomBar from '../BottomBar/BottomBar';\nimport Chat from '../Chat/Chat';\n\nconst Room = (props) => {\n  const currentUser = sessionStorage.getItem('user');\n  const [peers, setPeers] = useState([]);\n  const [userVideoAudio, setUserVideoAudio] = useState({\n    localUser: { video: true, audio: true },\n  });\n  const [videoDevices, setVideoDevices] = useState([]);\n  const [displayChat, setDisplayChat] = useState(false);\n  const [screenShare, setScreenShare] = useState(false);\n  const [showVideoDevices, setShowVideoDevices] = useState(false);\n  const peersRef = useRef([]);\n  const userVideoRef = useRef();\n  const screenTrackRef = useRef();\n  const userStream = useRef();\n  const roomId = props.match.params.roomId;\n\n  useEffect(() => {\n    // Get Video Devices\n    navigator.mediaDevices.enumerateDevices().then((devices) => {\n      const filtered = devices.filter((device) => device.kind === 'videoinput');\n      setVideoDevices(filtered);\n    });\n\n    // Set Back Button Event\n    window.addEventListener('popstate', goToBack);\n\n    // Connect Camera & Mic\n    navigator.mediaDevices\n      .getUserMedia({ video: true, audio: true })\n      .then((stream) => {\n        userVideoRef.current.srcObject = stream;\n        userStream.current = stream;\n\n        socket.emit('BE-join-room', { roomId, userName: currentUser });\n        socket.on('FE-user-join', (users) => {\n          // all users\n          const peers = [];\n          users.forEach(({ userId, info }) => {\n            let { userName, video, audio } = info;\n\n            if (userName !== currentUser) {\n              const peer = createPeer(userId, socket.id, stream);\n\n              peer.userName = userName;\n              peer.peerID = userId;\n\n              peersRef.current.push({\n                peerID: userId,\n                peer,\n                userName,\n              });\n              peers.push(peer);\n\n              setUserVideoAudio((preList) => {\n                return {\n                  ...preList,\n                  [peer.userName]: { video, audio },\n                };\n              });\n            }\n          });\n\n          setPeers(peers);\n        });\n\n        socket.on('FE-receive-call', ({ signal, from, info }) => {\n          let { userName, video, audio } = info;\n          const peerIdx = findPeer(from);\n\n          if (!peerIdx) {\n            const peer = addPeer(signal, from, stream);\n\n            peer.userName = userName;\n\n            peersRef.current.push({\n              peerID: from,\n              peer,\n              userName: userName,\n            });\n            setPeers((users) => {\n              return [...users, peer];\n            });\n            setUserVideoAudio((preList) => {\n              return {\n                ...preList,\n                [peer.userName]: { video, audio },\n              };\n            });\n          }\n        });\n\n        socket.on('FE-call-accepted', ({ signal, answerId }) => {\n          const peerIdx = findPeer(answerId);\n          peerIdx.peer.signal(signal);\n        });\n\n        socket.on('FE-user-leave', ({ userId, userName }) => {\n          const peerIdx = findPeer(userId);\n          peerIdx.peer.destroy();\n          setPeers((users) => {\n            users = users.filter((user) => user.peerID !== peerIdx.peer.peerID);\n            return [...users];\n          });\n          peersRef.current = peersRef.current.filter(({ peerID }) => peerID !== userId );\n        });\n      });\n\n    socket.on('FE-toggle-camera', ({ userId, switchTarget }) => {\n      const peerIdx = findPeer(userId);\n\n      setUserVideoAudio((preList) => {\n        let video = preList[peerIdx.userName].video;\n        let audio = preList[peerIdx.userName].audio;\n\n        if (switchTarget === 'video') video = !video;\n        else audio = !audio;\n\n        return {\n          ...preList,\n          [peerIdx.userName]: { video, audio },\n        };\n      });\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  function createPeer(userId, caller, stream) {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream,\n    });\n\n    peer.on('signal', (signal) => {\n      socket.emit('BE-call-user', {\n        userToCall: userId,\n        from: caller,\n        signal,\n      });\n    });\n    peer.on('disconnect', () => {\n      peer.destroy();\n    });\n\n    return peer;\n  }\n\n  function addPeer(incomingSignal, callerId, stream) {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream,\n    });\n\n    peer.on('signal', (signal) => {\n      socket.emit('BE-accept-call', { signal, to: callerId });\n    });\n\n    peer.on('disconnect', () => {\n      peer.destroy();\n    });\n\n    peer.signal(incomingSignal);\n\n    return peer;\n  }\n\n  function findPeer(id) {\n    return peersRef.current.find((p) => p.peerID === id);\n  }\n\n  function createUserVideo(peer, index, arr) {\n    return (\n      <VideoBox\n        className={`width-peer${peers.length > 8 ? '' : peers.length}`}\n        onClick={expandScreen}\n        key={index}\n      >\n        {writeUserName(peer.userName)}\n        <FaIcon className='fas fa-expand' />\n        <VideoCard key={index} peer={peer} number={arr.length} />\n      </VideoBox>\n    );\n  }\n\n  function writeUserName(userName, index) {\n    if (userVideoAudio.hasOwnProperty(userName)) {\n      if (!userVideoAudio[userName].video) {\n        return <UserName key={userName}>{userName}</UserName>;\n      }\n    }\n  }\n\n  // Open Chat\n  const clickChat = (e) => {\n    e.stopPropagation();\n    setDisplayChat(!displayChat);\n  };\n\n  // BackButton\n  const goToBack = (e) => {\n    e.preventDefault();\n    socket.emit('BE-leave-room', { roomId, leaver: currentUser });\n    sessionStorage.removeItem('user');\n    window.location.href = '/';\n  };\n\n  const toggleCameraAudio = (e) => {\n    const target = e.target.getAttribute('data-switch');\n\n    setUserVideoAudio((preList) => {\n      let videoSwitch = preList['localUser'].video;\n      let audioSwitch = preList['localUser'].audio;\n\n      if (target === 'video') {\n        const userVideoTrack = userVideoRef.current.srcObject.getVideoTracks()[0];\n        videoSwitch = !videoSwitch;\n        userVideoTrack.enabled = videoSwitch;\n      } else {\n        const userAudioTrack = userVideoRef.current.srcObject.getAudioTracks()[0];\n        audioSwitch = !audioSwitch;\n\n        if (userAudioTrack) {\n          userAudioTrack.enabled = audioSwitch;\n        } else {\n          userStream.current.getAudioTracks()[0].enabled = audioSwitch;\n        }\n      }\n\n      return {\n        ...preList,\n        localUser: { video: videoSwitch, audio: audioSwitch },\n      };\n    });\n\n    socket.emit('BE-toggle-camera-audio', { roomId, switchTarget: target });\n  };\n\n  const clickScreenSharing = () => {\n    if (!screenShare) {\n      navigator.mediaDevices\n        .getDisplayMedia({ cursor: true })\n        .then((stream) => {\n          const screenTrack = stream.getTracks()[0];\n\n          peersRef.current.forEach(({ peer }) => {\n            // replaceTrack (oldTrack, newTrack, oldStream);\n            peer.replaceTrack(\n              peer.streams[0]\n                .getTracks()\n                .find((track) => track.kind === 'video'),\n              screenTrack,\n              userStream.current\n            );\n          });\n\n          // Listen click end\n          screenTrack.onended = () => {\n            peersRef.current.forEach(({ peer }) => {\n              peer.replaceTrack(\n                screenTrack,\n                peer.streams[0]\n                  .getTracks()\n                  .find((track) => track.kind === 'video'),\n                userStream.current\n              );\n            });\n            userVideoRef.current.srcObject = userStream.current;\n            setScreenShare(false);\n          };\n\n          userVideoRef.current.srcObject = stream;\n          screenTrackRef.current = screenTrack;\n          setScreenShare(true);\n        });\n    } else {\n      screenTrackRef.current.onended();\n    }\n  };\n\n  const expandScreen = (e) => {\n    const elem = e.target;\n\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.mozRequestFullScreen) {\n      /* Firefox */\n      elem.mozRequestFullScreen();\n    } else if (elem.webkitRequestFullscreen) {\n      /* Chrome, Safari & Opera */\n      elem.webkitRequestFullscreen();\n    } else if (elem.msRequestFullscreen) {\n      /* IE/Edge */\n      elem.msRequestFullscreen();\n    }\n  };\n\n  const clickBackground = () => {\n    if (!showVideoDevices) return;\n\n    setShowVideoDevices(false);\n  };\n\n  const clickCameraDevice = (event) => {\n    if (event && event.target && event.target.dataset && event.target.dataset.value) {\n      const deviceId = event.target.dataset.value;\n      const enabledAudio = userVideoRef.current.srcObject.getAudioTracks()[0].enabled;\n\n      navigator.mediaDevices\n        .getUserMedia({ video: { deviceId }, audio: enabledAudio })\n        .then((stream) => {\n          const newStreamTrack = stream.getTracks().find((track) => track.kind === 'video');\n          const oldStreamTrack = userStream.current\n            .getTracks()\n            .find((track) => track.kind === 'video');\n\n          userStream.current.removeTrack(oldStreamTrack);\n          userStream.current.addTrack(newStreamTrack);\n\n          peersRef.current.forEach(({ peer }) => {\n            // replaceTrack (oldTrack, newTrack, oldStream);\n            peer.replaceTrack(\n              oldStreamTrack,\n              newStreamTrack,\n              userStream.current\n            );\n          });\n        });\n    }\n  };\n\n  return (\n    <RoomContainer onClick={clickBackground}>\n      <VideoAndBarContainer>\n        <VideoContainer>\n          {/* Current User Video */}\n          <VideoBox\n            className={`width-peer${peers.length > 8 ? '' : peers.length}`}\n          >\n            {userVideoAudio['localUser'].video ? null : (\n              <UserName>{currentUser}</UserName>\n            )}\n            <FaIcon className='fas fa-expand' />\n            <MyVideo\n              onClick={expandScreen}\n              ref={userVideoRef}\n              muted\n              autoPlay\n              playInline\n            ></MyVideo>\n          </VideoBox>\n          {/* Joined User Vidoe */}\n          {peers &&\n            peers.map((peer, index, arr) => createUserVideo(peer, index, arr))}\n        </VideoContainer>\n        <BottomBar\n          clickScreenSharing={clickScreenSharing}\n          clickChat={clickChat}\n          clickCameraDevice={clickCameraDevice}\n          goToBack={goToBack}\n          toggleCameraAudio={toggleCameraAudio}\n          userVideoAudio={userVideoAudio['localUser']}\n          screenShare={screenShare}\n          videoDevices={videoDevices}\n          showVideoDevices={showVideoDevices}\n          setShowVideoDevices={setShowVideoDevices}\n        />\n      </VideoAndBarContainer>\n      <Chat display={displayChat} roomId={roomId} />\n    </RoomContainer>\n  );\n};\n\nconst RoomContainer = styled.div`\n  display: flex;\n  width: 100%;\n  max-height: 100vh;\n  flex-direction: row;\n`;\n\nconst VideoContainer = styled.div`\n  max-width: 100%;\n  height: 92%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  align-items: center;\n  padding: 15px;\n  box-sizing: border-box;\n  gap: 10px;\n`;\n\nconst VideoAndBarContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100vh;\n`;\n\nconst MyVideo = styled.video``;\n\nconst VideoBox = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  > video {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  :hover {\n    > i {\n      display: block;\n    }\n  }\n`;\n\nconst UserName = styled.div`\n  position: absolute;\n  font-size: calc(20px + 5vmin);\n  z-index: 1;\n`;\n\nconst FaIcon = styled.i`\n  display: none;\n  position: absolute;\n  right: 15px;\n  top: 15px;\n`;\n\nexport default Room;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}